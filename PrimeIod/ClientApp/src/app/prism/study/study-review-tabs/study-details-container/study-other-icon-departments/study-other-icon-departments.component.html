<app-loader [isLoading]="true" *ngIf="loading"></app-loader>

<form [formGroup]="form" (ngSubmit)="submit()">
  <formly-form [model]="studyDetails" [fields]="fields" [options]="options" [form]="form"></formly-form>
  <div class="alert alert-warning" role="alert" *ngIf="otherIconDeptImiIsModified">
    {{ otherIconDeptImiMessage }}
  </div>
  <div class="alert alert-warning" role="alert" *ngIf="centralMonitoringIsModified">
    {{ centralMonitoringMessage }}
  </div>
  <button type="submit" class="btn btn-primary submit-button" [disabled]="!(form.valid && form.dirty)">
    Save
  </button>
  <button type="button" class="btn btn-light me-1" (click)="options.resetModel()">Undo</button>
  <!-- <span class="alert alert-info">Last Updated on: {{ studyDetails?.updatedOn | date: 'd-MMM-y, h:mm a' }}</span> -->
  <app-last-saved [auditFields]="studyDetails"></app-last-saved>

</form>

<hr />
<!-- <p>centralMonitoringFieldDisable: {{centralMonitoringFieldDisable}}</p> -->
<!-- {{ studyDetails | json }} -->
