<div class="card col-md-12 mt-3 mx-auto">
  <div class="card-body">
    <form [formGroup]="loginForm" novalidate>
      <div class="alert alert-danger" [hidden]="!errorOTPLogin || isLoading" translate>
        {{ errorOTPLogin }}
      </div>
      <div class="form-group">
        <label class="d-block">
          <input
            type="text"
            class="form-control"
            formControlName="username"
            autocomplete="username"
            [placeholder]="'phone number' | translate"
            [attr.disabled]="tokenGenerated ? '' : null"
          />
          <span hidden translate>Phone number</span>
          <small
            [hidden]="
              loginForm.controls.username.valid ||
              loginForm.controls.username.untouched ||
              loginForm.controls.username.hasError('pattern')
            "
            class="text-danger"
            translate
          >
            Phone number should be 10 digits, numbers only
          </small>
        </label>
        <div *ngIf="tokenGenerated">
          <label class="d-block small">Please enter the OTP sent to your mobile number.</label>

          <label class="d-block">
            <input type="text" class="form-control" formControlName="password" [placeholder]="'OTP' | translate" />
            <span hidden translate>OTP</span>
            <small
              [hidden]="loginForm.controls.password.valid || loginForm.controls.password.untouched"
              class="text-danger"
              translate
            >
              OTP is required
            </small>
          </label>
        </div>
      </div>
      <div *ngIf="!tokenGenerated">
        <button class="btn btn-primary w-100" (click)="sendOTP()" [disabled]="!loginForm.controls.username.valid">
          <span>Send OTP</span>
        </button>
      </div>
      <div *ngIf="tokenGenerated">
        <button type="button" class="btn btn-link btn-xs small" (click)="generateEMailToken()">Regenerate OTP</button>
        <button type="button" class="btn btn-link btn-xs" (click)="reLogin()">Login with another Mobile Number.</button>

        <button class="btn btn-primary w-100" (click)="login(loginForm)">
          <span>Verify OTP</span>
        </button>
      </div>
    </form>
  </div>
</div>
