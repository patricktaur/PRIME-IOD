<app-loader [isLoading]="isLoading"></app-loader>
<div class="">
  <div class="row">
    <div class="col-md-12">
      <!-- <h4 class="mb-4">{{ title }}</h4> -->
      <div class="clearfix">
        <h4 class="mb-3 float-start me-3">{{ title }}</h4>
        <!-- <button type="button" class="btn btn-primary mb-3 float-end" (click)="onClickBack()">Back</button> -->
      </div>
      <app-imi-review-compliance-filters
        [records]="activeStudies"
        (filterChange)="onFilterChange($event)"
        (searchTextChange)="onSearchTextChange($event)"
      ></app-imi-review-compliance-filters>

      <div class="bg-icon-light me-n5 ms-n5 mb-3 px-3 py-3 border-bottom border-top">
        <app-report-download-csv-2-json
          [records]="filteredStudies"
          [fields]="columns"
          [fileName]="csvfileName"
          [appendDateToFiileName]="true"
        ></app-report-download-csv-2-json>
      </div>
    </div>
    <div class="col-md-12 mt-3 border-top pt-3">
      <ul ngbNav #nav="ngbNav" class="nav-pills">
        <li ngbNavItem>
          <a ngbNavLink>IMI Reviews Compliant ({{ isCompliantCount }})</a>
          <ng-template ngbNavContent>
            <app-imi-proj-rev-comp-list
              [records]="compliantRecords"
              [searchTerm]="searchTerm"
            ></app-imi-proj-rev-comp-list>
          </ng-template>
        </li>
        <li ngbNavItem>
          <a ngbNavLink>IMI Reviews Overdue by IMI PM ({{ ReviewOverDueByDMPMCount }})</a>
          <ng-template ngbNavContent>
            <app-imi-proj-rev-comp-list
              [records]="ReviewOverDueByDMPMRecords"
              [searchTerm]="searchTerm"
            ></app-imi-proj-rev-comp-list>
          </ng-template>
        </li>
        <li ngbNavItem>
          <a ngbNavLink>IMI Reviews Pending from IMI Project Director ({{ ReviewOverDueByDMPMManagerCount }})</a>
          <ng-template ngbNavContent>
            <app-imi-proj-rev-comp-list
              [records]="ReviewOverDueByDMPMManagerRecords"
              [searchTerm]="searchTerm"
            ></app-imi-proj-rev-comp-list>
          </ng-template>
        </li>
        <li ngbNavItem>
          <a ngbNavLink>Project Manager(s) with no reviews completed ever ({{ noReviewSoSarCount }})</a>
          <ng-template ngbNavContent>
            <app-imi-proj-rev-comp-list
              [records]="noReviewSoSarRecords"
              [searchTerm]="searchTerm"
            ></app-imi-proj-rev-comp-list>
          </ng-template>
        </li>
        <li ngbNavItem>
          <a ngbNavLink>All Active ({{ activeRecordsCount }})</a>
          <ng-template ngbNavContent>
            <app-imi-proj-rev-comp-list
              [records]="filteredStudies"
              [searchTerm]="searchTerm"
            ></app-imi-proj-rev-comp-list>
          </ng-template>
        </li>
      </ul>
      <div [ngbNavOutlet]="nav" class="mt-2"></div>

      <!-- <ngb-tabset type="pills">
        <ngb-tab title="IMI Reviews Compliant ({{ isCompliantCount }}) ">
          <ng-template ngbTabContent>
            <app-imi-proj-rev-comp-list
              [records]="compliantRecords"
              [searchTerm]="searchTerm"
            ></app-imi-proj-rev-comp-list>
          </ng-template>
        </ngb-tab>
        <ngb-tab title="IMI Reviews Overdue by IMI PM ({{ ReviewOverDueByDMPMCount }})">
          <ng-template ngbTabContent>
            <app-imi-proj-rev-comp-list
              [records]="ReviewOverDueByDMPMRecords"
              [searchTerm]="searchTerm"
            ></app-imi-proj-rev-comp-list>
          </ng-template>
        </ngb-tab>

        <ngb-tab title="IMI Reviews Pending from IMI Project Director ({{ ReviewOverDueByDMPMManagerCount }})">
          <ng-template ngbTabContent>
            <app-imi-proj-rev-comp-list
              [records]="ReviewOverDueByDMPMManagerRecords"
              [searchTerm]="searchTerm"
            ></app-imi-proj-rev-comp-list>
          </ng-template>
        </ngb-tab>
        <ngb-tab title="Project Manager(s) with no reviews completed ever ({{ noReviewSoSarCount }})">
          <ng-template ngbTabContent>
            <app-imi-proj-rev-comp-list
              [records]="noReviewSoSarRecords"
              [searchTerm]="searchTerm"
            ></app-imi-proj-rev-comp-list>
          </ng-template>
        </ngb-tab>
        <ngb-tab title="All Active ({{ activeRecordsCount }})">
          <ng-template ngbTabContent>
            <app-imi-proj-rev-comp-list
              [records]="filteredStudies"
              [searchTerm]="searchTerm"
            ></app-imi-proj-rev-comp-list>
          </ng-template>
        </ngb-tab>
      </ngb-tabset> -->
    </div>
  </div>
</div>
<!-- <p>activeStudies: {{ activeStudies | json }}</p> -->
