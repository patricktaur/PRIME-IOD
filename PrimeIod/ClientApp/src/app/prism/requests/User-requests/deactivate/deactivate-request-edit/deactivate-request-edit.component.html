<app-loader [isLoading]="loading"></app-loader>

<h5>{{ title }}</h5>
<hr />

<div *ngIf="showUserSelectDropDown">
  <div class="row">
    <div class="col-3">
      User to Deactivate
    </div>
    <div class="col-9">
      <app-user-view-select
        [userId]="record?.pid"
        (userSelected)="onUserSelected($event)"
        [disabled]="userSelectDropDownDisabled"
      ></app-user-view-select>
      <div class="alert alert-warning" role="alert" *ngIf="showSelectUserAlert()">
        Select User.
      </div>
    </div>
  </div>
  <hr />
</div>

<app-user-view [userId]="userId"></app-user-view>

<hr />
<form [formGroup]="form">
  <formly-form [model]="record" [fields]="fields" [options]="options" [form]="form"></formly-form>
  <div class="alert alert-warning" role="alert" *ngIf="showOtherUserAlert()">
    Last actioned by: {{ record?.updatedByDisplayName }}. Action buttons not available for other users.
  </div>
  <button type="button" class="btn btn-default" (click)="back()">Back</button>

  <button
    *ngIf="saveButton"
    type="submit"
    class="btn btn-primary submit-button me-1"
    [disabled]="disableSaveSubmitButtons()"
    (click)="addOrUpdate()"
  >
    Save
  </button>
  <button *ngIf="saveButton" type="button" class="btn btn-default" (click)="options.resetModel()">Undo</button>
  <app-confirmation-shell
    *ngIf="removeButton"
    [message]="'Remove Request: ' + recId + ' ?'"
    [labelText]="'Remove'"
    [responseValue]="recId"
    (response)="deleteRecord($event)"
  >
  </app-confirmation-shell>
  <!-- <button
    *ngIf="submitForApprovalButton"
    type="button"
    (click)="submitForApproval()"
    class="btn btn-primary submit-button"
  >
    Submit For Deactivate
  </button>
  <button *ngIf="withdrawRequestButton" type="button" (click)="withdrawRequest()" class="btn btn-primary submit-button">
    Withdraw Request
  </button> -->

  <!-- <button type="submit" class="btn btn-primary submit-button">Withdraw Request</button> 
  <button type="button" (click)="submitForApproval()" class="btn btn-primary submit-button" [disabled]="!(form.valid && form.dirty)">
    Submit For Approval
  </button>
  -->

  <app-confirmation-shell
    *ngIf="submitForApprovalButton"
    [message]="'Submit Request for Approval: ' + recId + ' ?'"
    [labelText]="'Submit For Approval'"
    [responseValue]="recId"
    (response)="submitForApproval()"
    [disabled]="disableSaveSubmitButtons()"
  >
  </app-confirmation-shell>

  <app-confirmation-shell
    *ngIf="withdrawRequestButton"
    [message]="'Withdraw submitted Request: ' + recId + ' ?'"
    [labelText]="'Withdraw submitted request'"
    [responseValue]="recId"
    (response)="withdrawRequest()"
  >
  </app-confirmation-shell>
</form>

<!-- <form [formGroup]="form1" (ngSubmit)="SearchUserInfo()">
    <formly-form [model]="record1" [fields]="fields1" [options]="options" [form]="form1"></formly-form>
    <button type="submit" class="btn btn-primary submit-button">Search</button>
  </form> -->

<hr />

<hr />

<!-- <p>record: {{ record | json }}</p> -->

<!-- <p>showOtherUserAlert: {{showOtherUserAlert()}}</p> -->

<!-- <p>currentUserIsLastUpdatedByUser: {{currentUserIsLastUpdatedByUser()}}</p> -->
