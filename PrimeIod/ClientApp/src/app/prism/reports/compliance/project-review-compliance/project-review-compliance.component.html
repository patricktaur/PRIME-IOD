<app-loader [isLoading]="isLoading"></app-loader>
<div class="">
  <div class="row">
    <div class="col-md-12">
      <div class="clearfix">
        <h4 class="mb-3 float-start me-3">{{ title }}</h4>
        <!-- <button type="button" class="btn btn-primary mb-3 float-end" (click)="onClickBack()">Back</button> -->
      </div>
      <div class="bg-icon-light me-n5 ms-n5 mb-3 px-3 py-3 border-bottom border-top">
        <app-study-filters
          [records]="activeStudies"
          (filterChange)="onFilterOneChange($event)"
          (searchTextChange)="onSearchTextChange($event)"
        ></app-study-filters>
        <app-study-review-filter
          [records]="filteredOneStudies"
          (filterChange)="onFilterTwoChange($event)"
        ></app-study-review-filter>

        <!-- <app-report-download
          [reportPath]="'api/VwStudyReviewComplianceV2/download-csv'"
          [fileName]="'ProjectReviewCompliance.csv'"
          [appendDateToFiileName]="true"
        ></app-report-download> -->

        <app-report-download-csv-2-json
          [records]="filteredStudies"
          [fields]="columns"
          [fileName]="csvfileName"
          [appendDateToFiileName]="true"
        ></app-report-download-csv-2-json>
      </div>
    </div>
    <div class="col-md-12 mt-3 border-top pt-3">
      <ul ngbNav #nav="ngbNav" class="nav-pills">
        <li ngbNavItem>
          <a ngbNavLink>Compliant ({{ isCompliantCount }})</a>
          <ng-template ngbNavContent>
            <app-project-review-compliance-list [records]="compliantRecords" [searchTerm]="searchTerm">
            </app-project-review-compliance-list>
          </ng-template>
        </li>
        <li ngbNavItem>
          <a ngbNavLink>With DMPM ({{ ReviewOverDueByDMPMCount }})</a>
          <ng-template ngbNavContent>
            <app-project-review-compliance-list [records]="ReviewOverDueByDMPMRecords" [searchTerm]="searchTerm">
            </app-project-review-compliance-list>
          </ng-template>
        </li>
        <li ngbNavItem>
          <a ngbNavLink>Pending with DMPM Manager ({{ ReviewOverDueByDMPMManagerCount }})</a>
          <ng-template ngbNavContent>
            <app-project-review-compliance-list [records]="ReviewOverDueByDMPMManagerRecords" [searchTerm]="searchTerm">
            </app-project-review-compliance-list>
          </ng-template>
        </li>
        <li ngbNavItem>
          <a ngbNavLink>All Active ({{ activeRecordsCount }})</a>
          <ng-template ngbNavContent>
            <app-project-review-compliance-list [records]="filteredStudies" [searchTerm]="searchTerm">
            </app-project-review-compliance-list>
          </ng-template>
        </li>
      </ul>
      <div [ngbNavOutlet]="nav" class="mt-2"></div>
     
      <!-- <ngb-tabset type="pills">
        <ngb-tab title="Compliant ({{ isCompliantCount }}) ">
          <ng-template ngbTabContent>
            <app-project-review-compliance-list [records]="compliantRecords" [searchTerm]="searchTerm">
            </app-project-review-compliance-list>
          </ng-template>
        </ngb-tab>
        <ngb-tab title="With DMPM ({{ ReviewOverDueByDMPMCount }})">
          <ng-template ngbTabContent>
            <app-project-review-compliance-list [records]="filteredStudies" [searchTerm]="searchTerm">
            </app-project-review-compliance-list>
          </ng-template>
        </ngb-tab>

        <ngb-tab title="Pending with DMPM Manager ({{ ReviewOverDueByDMPMManagerCount }})">
          <ng-template ngbTabContent>
            <app-project-review-compliance-list [records]="ReviewOverDueByDMPMManagerRecords" [searchTerm]="searchTerm">
            </app-project-review-compliance-list>
          </ng-template>
        </ngb-tab>
        <ngb-tab title="All Active ({{ activeRecordsCount }})">
          <ng-template ngbTabContent>
            <app-project-review-compliance-list [records]="filteredStudies" [searchTerm]="searchTerm">
            </app-project-review-compliance-list>
          </ng-template>
        </ngb-tab>
      </ngb-tabset> -->
    </div>
  </div>
</div>
