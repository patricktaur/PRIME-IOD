<app-loader [isLoading]="true" *ngIf="isLoading"></app-loader>
<div class="">
  <div class="row">
    <div class="col-md-12">
      <div class="clearfix">
        <h4 class="mb-3 float-start me-3">{{title}}</h4>
      </div>
      <div class="bg-icon-light me-n5 ms-n5 px-3 py-3 border-bottom border-top">
        <div class="row">
          <div class="col-6">
            <div class="form-group">
              <label class="form-label">Year : </label>
              <div class="input-group">
                <ng-select
                  id="exampleFormControlSelect1"
                  [(ngModel)]="selectedFilters.year"
                  placeholder="All"
                  [clearable]="false"
                  (ngModelChange)="onFiltersChange()"
                  style="width: 200px;"
                >
                  <ng-option *ngFor="let rec of YearList" [value]="rec.value">{{ rec.value }}</ng-option>
                </ng-select>
              </div>
            </div>
          </div>
        </div>
        <!-- filters -->
        <!-- <app-region-portfolio-director-cdms-dmpm-filter
          [records]="records"
          (filterChange)="onFilteredRecordsChange($event)"
        ></app-region-portfolio-director-cdms-dmpm-filter> -->
        <app-report-download-csv-2-json
          [records]="filteredRecords"
          [fields]="columns"
          [fileName]="csvfileName"
          [appendDateToFiileName]="true"
        ></app-report-download-csv-2-json>
      </div>
    </div>
  </div>

  <div class="row mb-3">
    <!-- {{columns | json}} -->
    <div class="table-responsive">
      <app-data-table-base
        [columns]="columns"
        [records]="filteredRecords"
        [pageNumber]="pageNumber"
        [pageSize]="pageSize"
      ></app-data-table-base>
    </div>
  </div>

  <div class="row">
    <div class="col col-2"></div>
    <div class="col">
      <pagination-control
        [page]="pageNumber"
        [pageSize]="pageSize"
        [collectionSize]="filteredRecords?.length"
        (onPageChange)="onPageChange($event)"
      ></pagination-control>
    </div>
  </div>
</div>
<!-- <p>record: {{ filteredRecords | json }}</p>

<p>Columns: {{ columns | json }}</p> -->