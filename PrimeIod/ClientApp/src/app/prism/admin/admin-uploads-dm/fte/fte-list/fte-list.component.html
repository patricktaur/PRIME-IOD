<h4>FTE Upload</h4>

<ul ngbNav #nav="ngbNav" class="nav-pills">
	<li ngbNavItem>
		<a ngbNavLink>Upload a File</a>
		<ng-template ngbNavContent>



			<!-- <div class="drop-zone" 
				(drop)="onFileDropped($event)" 
				(dragover)="onDragOver($event)" 
				(dragleave)="onDragLeave($event)"
				[ngClass]="{'drag-over': dragOver}">
				<p>Drag and drop a file or click to select a file</p>
				<input type="file" (change)="onFileSelected($event)" [hidden]="true">
			</div>

			<p>XXX: {{selectedFileName}}</p>

			<button (click)="onUpload()" [disabled]="uploadInProgress || !selectedFile">Upload</button>
			<span *ngIf="uploadInProgress">Uploading...</span> -->

			<div>
				<form [formGroup]="fileUploadForm">
					<!-- <select formControlName="vendorId"  class="form-control" >
						<option *ngFor="let vendor of vendors" [value]="vendor.id">{{vendor.name}}</option>
					</select> -->
					<!-- <file-upload formControlName="files" fileslimit="1" multiple="false"></file-upload> -->
					<app-ngx-file-upload [control]="files" (controlChange)="onControlChange($event)"></app-ngx-file-upload>
				</form>

				<!-- <app-file-upload class="file-upload" (filesChanged)="setFileList($event)" [multiple]="false">
						<div>Drag and drop files here </div>
						<div>
								{{ fileList1 | json }}
						</div>
				</app-file-upload> -->
				<button class="btn btn-primary" (click)="upload()" [disabled]="fileUploadForm.invalid">
					<i class="bi bi-cloud-upload"></i> Upload
				</button>
				<span *ngIf="uploadInProgress">Uploading...</span>
			</div>

			<!-- <p>XXX: {{selectedFileName}}</p> -->
			<!-- <button class="btn btn-primary" (click)="onUpload()" [disabled]="uploadInProgress || !selectedFile "><i class="bi bi-cloud-upload"></i> Upload</button> -->
			
			

			<br/>
			<app-alert [alerts]="alerts"></app-alert>

			<table class="table table-bordered table-sm table-hover small table-striped" style="border-color:lightgray;">
				<thead style="background-color: #b6effb;">
					<tr>
						<th align="left">Uploaded On</th>
						<th align="left">Uploaded By</th>
						<th align="left">File Name</th>
						<th align="left">No. Of Records</th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let uploadDetail of uploadDetails;">
						<td>{{ uploadDetail.uploadedOn | date: 'dd-MMM-yyyy, hh:mm:ss'}}</td>
						<td>{{ uploadDetail.uploadedByUsrDisplayName }}</td>
						<td>{{ uploadDetail.fileName }}</td>
						<td>{{ uploadDetail.totalRecords }}</td>
					</tr>
				</tbody>
			</table>
		</ng-template>
	</li>

	<li ngbNavItem>
		<a ngbNavLink>Instructions</a>
		<ng-template ngbNavContent>
			<table class="table table-bordered table-sm table-hover small table-striped" style="border-color:lightgray;">
				<thead style="background-color: #b6effb;">
					<tr>
						<th colspan="3">
							File Format
						</th>
					</tr>
					<tr>
						<th align="left">Column Position</th>
						<th align="left">Icon Number</th>
						<th align="left">Description</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>1</td>
						<td>ICON Number</td>
						<td>
							<p>It should be of 8 digit.</p>
							<p>Numeric must match existing ICON/number</p>
						</td>
					</tr>
					<tr>
						<td>2</td>
						<td>YYYYMM</td>
						<td>
							<p>Format: 201408</p>
							<p>First 4 digits represent a year and must be between Start & End date of study and last 2 digits
								represent month</p>
						</td>
					</tr>
					<tr>
						<td>3</td>
						<td>Role</td>
						<td>dmpm/ cdl/ cdc/ cod/ pm-offshore /pm-onshore /sl-offshore /sl-onshore /cdc-onshore /cdc-offshore
							/cod-onshore /cod-offshore (Roles are not case-sensitive)</td>
					</tr>
					<tr>
						<td>4</td>
						<td>FTE</td>
						<td>
							<p>Numeric decimal</p>
							<p>Ex:'2.38686'</p>
						</td>
					</tr>
				</tbody>
			</table>
			<button *ngIf="!downloadInProgress" class="btn btn-primary" (click)="downloadSampleTemplate()">Download Template</button>
			<button *ngIf="downloadInProgress" class="btn btn-primary" type="button" disabled>
				<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
				Downloading...
			</button>
		</ng-template>
	</li>
</ul>
<div [ngbNavOutlet]="nav" class="mt-2"></div>